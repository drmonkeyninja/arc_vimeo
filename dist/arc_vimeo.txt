# arc_vimeo v1.0
# Embed Vimeo videos with customised player
# Andy Carter
# http://andy-carter.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YTo5OntzOjQ6Im5hbWUiO3M6OToiYXJjX3ZpbWVvIjtzOjc6InZlcnNpb24iO3M6MzoiMS4w
IjtzOjY6ImF1dGhvciI7czoxMToiQW5keSBDYXJ0ZXIiO3M6MTA6ImF1dGhvcl91cmkiO3M6
MjM6Imh0dHA6Ly9hbmR5LWNhcnRlci5jb20vIjtzOjExOiJkZXNjcmlwdGlvbiI7czo0MToi
RW1iZWQgVmltZW8gdmlkZW9zIHdpdGggY3VzdG9taXNlZCBwbGF5ZXIiO3M6NDoidHlwZSI7
aTowO3M6NDoiaGVscCI7czo2ODY1OiIJPGgxPmFyY192aW1lbzwvaDE+CgoJPHA+RWFzaWx5
IGVtYmVkIFZpbWVvIHZpZGVvcyBpbiBhcnRpY2xlcyBhbmQgY3VzdG9taXNlIHRoZSBhcHBl
YXJhbmNlIG9mIHRoZSBwbGF5ZXIuPC9wPgoKCTxoMj5UYWJsZSBvZiBjb250ZW50czwvaDI+
CgoJPG9sPgoJCTxsaT48YSBocmVmPSIjaGVscC1zZWN0aW9uMDEiPlBsdWdpbiByZXF1aXJl
bWVudHM8L2E+PC9saT4KCQk8bGk+PGEgaHJlZj0iI2hlbHAtc2VjdGlvbjAyIj5JbnN0YWxs
YXRpb248L2E+PC9saT4KCQk8bGk+PGEgaHJlZj0iI2hlbHAtc2VjdGlvbjAzIj5UYWdzPC9h
PjwvbGk+CgkJPGxpPjxhIGhyZWY9IiNoZWxwLXNlY3Rpb24wNCI+RXhhbXBsZXM8L2E+PC9s
aT4KCQk8bGk+PGEgaHJlZj0iI2hlbHAtc2VjdGlvbjA1Ij5BdXRob3I8L2E+PC9saT4KCQk8
bGk+PGEgaHJlZj0iI2hlbHAtc2VjdGlvbjA2Ij5MaWNlbnNlPC9hPjwvbGk+Cgk8L29sPgoK
CTxoMiBpZD0iaGVscC1zZWN0aW9uMDEiPlBsdWdpbiByZXF1aXJlbWVudHM8L2gyPgoKCTxw
PmFyY192aW1lbyYjODIxNztzIG1pbmltdW0gcmVxdWlyZW1lbnRzOjwvcD4KCgk8dWw+CgkJ
PGxpPlRleHRwYXR0ZXJuIDQuNSs8L2xpPgoJPC91bD4KCgk8aDIgaWQ9ImhlbHAtc2VjdGlv
bjAyIj5JbnN0YWxsYXRpb248L2gyPgoKCTxwPlRvIGluc3RhbGwgZ28gdG8gdGhlICYjODIx
NjtwbHVnaW5zJiM4MjE3OyB0YWIgdW5kZXIgJiM4MjE2O2FkbWluJiM4MjE3OyBhbmQgcGFz
dGUgdGhlIHBsdWdpbiBjb2RlIGludG8gdGhlICYjODIxNjtJbnN0YWxsIHBsdWdpbiYjODIx
NzsgYm94LCAmIzgyMTY7dXBsb2FkJiM4MjE3OyBhbmQgdGhlbiAmIzgyMTY7aW5zdGFsbCYj
ODIxNzsuIFBsZWFzZSBub3RlIHRoYXQgeW91IHdpbGwgbmVlZCB0byBzZXQtdXAgYSBjdXN0
b20gZmllbGQgdG8gdXNlIGZvciBhc3NvY2lhdGluZyB2aWRlb3Mgd2l0aCBhcnRpY2xlcywg
dW5sZXNzIHlvdSBjaG9vc2UgdG8gZGlyZWN0bHkgZW1iZWQgdGhlIG5ldyB0YWcgaW4gdGhl
IGFydGljbGUgdGV4dC48L3A+CgoJPGgyIGlkPSJoZWxwLXNlY3Rpb24wMyI+VGFnczwvaDI+
CgoJPGgzPmFyY192aW1lbzwvaDM+CgoJPHA+RW1iZWRzIGEgVmltZW8gdmlkZW8gaW4gdGhl
IHBhZ2UgdXNpbmcgYW4gaWZyYW1lLjwvcD4KCjxwcmU+PGNvZGU+Jmx0O3R4cDphcmNfdmlt
ZW8gLyZndDsKPC9jb2RlPjwvcHJlPgoKCTxoND5WaWRlbyBhdHRyaWJ1dGVzPC9oND4KCgk8
dWw+CgkJPGxpPjxlbT52aWRlbzwvZW0+ICYjODIxMTsgVmltZW8gdXJsIG9yIHZpZGVvIElE
IGZvciB0aGUgdmlkZW8geW91IHdhbnQgdG8gZW1iZWQ8L2xpPgoJCTxsaT48ZW0+Y3VzdG9t
PC9lbT4gJiM4MjExOyBOYW1lIG9mIHRoZSBjdXN0b20gZmllbGQgY29udGFpbmluZyB2aWRl
byBJRHMvdXJscyBhc3NvY2lhdGVkIHdpdGggYXJ0aWNsZTwvbGk+Cgk8L3VsPgoKCTxoND5C
YXNpYyBhdHRyaWJ1dGVzPC9oND4KCgk8dWw+CgkJPGxpPjxlbT5sYWJlbDwvZW0+ICYjODIx
MTsgTGFiZWwgZm9yIHRoZSB2aWRlbzwvbGk+CgkJPGxpPjxlbT5sYWJlbHRhZzwvZW0+ICYj
ODIxMTsgSW5kZXBlbmRlbnQgd3JhcHRhZyBmb3IgbGFiZWw8L2xpPgoJCTxsaT48ZW0+d3Jh
cHRhZzwvZW0+ICYjODIxMTsgPHNwYW4gY2xhc3M9ImNhcHMiPkhUTUw8L3NwYW4+IHRhZyB0
byBiZSB1c2VkIGFzIHRoZSB3cmFwdGFnLCB3aXRob3V0IGJyYWNrZXRzPC9saT4KCQk8bGk+
PGVtPmNsYXNzPC9lbT4gJiM4MjExOyA8c3BhbiBjbGFzcz0iY2FwcyI+Q1NTPC9zcGFuPiBj
bGFzcyBhdHRyaWJ1dGUgZm9yIHdyYXB0YWc8L2xpPgoJPC91bD4KCgk8aDM+Q3VzdG9taXNp
bmcgdGhlIFZpbWVvIHBsYXllcjwvaDM+CgoJPHA+WW91IGNhbiBjdXN0b21pc2UgdGhlIGFw
cGVhcmFuY2Ugb2YgdGhlIFZpbWVvIHBsYXllciB1c2luZyB0aGlzIHBsdWdpbiB0byBkZWZp
bmUgdGhpbmdzIGxpa2UgY29sb3VycyBhbmQgc2l6ZS48L3A+CgoJPHVsPgoJCTxsaT48ZW0+
d2lkdGg8L2VtPiAmIzgyMTE7IFdpZHRoIG9mIHZpZGVvPC9saT4KCQk8bGk+PGVtPmhlaWdo
dDwvZW0+ICYjODIxMTsgSGVpZ2h0IG9mIHZpZGVvPC9saT4KCQk8bGk+PGVtPnJhdGlvPC9l
bT4gJiM4MjExOyBBc3BlY3QgcmF0aW8gKGRlZmF1bHRzIDQ6Myk8L2xpPgoJCTxsaT48ZW0+
Y29sb3I8L2VtPiAmIzgyMTE7IEEgaGV4IGNvbG91ciBjb2RlIGZvciB0aGUgcGxheWVyIFVJ
IGVsZW1lbnRzPC9saT4KCQk8bGk+PGVtPnBvcnRyYWl0PC9lbT4gJiM4MjExOyAmIzgyMTY7
MCYjODIxNzsgdG8gZGlzYWJsZSB0aGUgdXNlciYjODIxNztzIHBvcnRyYWl0PC9saT4KCQk8
bGk+PGVtPnRpdGxlPC9lbT4gJiM4MjExOyAmIzgyMTY7MCYjODIxNzsgdG8gZGlzYWJsZSB0
aGUgdmlkZW8mIzgyMTc7cyB0aXRsZTwvbGk+CgkJPGxpPjxlbT5ieWxpbmU8L2VtPiAmIzgy
MTE7ICYjODIxNjswJiM4MjE3OyB0byBkaXNhYmxlIHRoZSB2aWRlbyYjODIxNztzIGJ5bGlu
ZTwvbGk+CgkJPGxpPjxlbT5iYWRnZTwvZW0+ICYjODIxMTsgJiM4MjE2OzAmIzgyMTc7IHRv
IGRpc2FibGUgdGhlIHZpZGVvJiM4MjE3O3MgYmFkZ2U8L2xpPgoJCTxsaT48ZW0+bG9vcDwv
ZW0+ICYjODIxMTsgJiM4MjE2OzEmIzgyMTc7IHRvIGxvb3AgdGhlIHZpZGVvIG9uIHBsYXk8
L2xpPgoJCTxsaT48ZW0+YXV0b3BsYXk8L2VtPiAmIzgyMTE7ICYjODIxNjsxJiM4MjE3OyB0
byBhdXRvcGxheSB0aGUgdmlkZW8sICYjODIxNjswJiM4MjE3OyB0byB0dXJuIG9mZiBhdXRv
cGxheSAoZGVmYXVsdCk8L2xpPgoJCTxsaT48ZW0+YXV0b3BhdXNlPC9lbT4gJiM4MjExOyAm
IzgyMTY7MSYjODIxNzsgdG8gYXV0b3BhdXNlIHRoZSB2aWRlbyB3aGVuIGFub3RoZXIgaXMg
cGxheWVkIG9uIHRoZSBzYW1lIHBhZ2U8L2xpPgoJPC91bD4KCgk8aDI+YXJjX2lmX3ZpbWVv
PC9oMj4KCgk8cD5JbiBhZGRpdGlvbiB0byBhcmNfdmltZW8gdGhpcyBwbHVnaW4gYWxzbyBj
b21lcyB3aXRoIGFyY19pZl92aW1lbywgYSBjb25kaXRpb25hbCB0YWcgZm9yIGNoZWNraW5n
IGlmIHRoZSB2aWRlbyA8c3BhbiBjbGFzcz0iY2FwcyI+VVJMPC9zcGFuPiBpcyBhIFZpbWVv
IG9uZS48L3A+Cgo8cHJlPjxjb2RlPiZsdDt0eHA6YXJjX2lmX3ZpbWVvIHZpZGVvPSYjMzk7
W1VSTF0mIzM5OyZndDsmbHQ7L3R4cDphcmNfaWZfdmltZW8mZ3Q7CjwvY29kZT48L3ByZT4K
Cgk8aDQ+QXR0cmlidXRlczwvaDQ+CgoJPHA+VXNlIG9uZSBvciB0aGUgb3RoZXIgb2YgdGhl
IGZvbGxvd2luZzotPC9wPgoKCTx1bD4KCQk8bGk+PGVtPmN1c3RvbTwvZW0+ICYjODIxMTsg
TmFtZSBvZiB0aGUgY3VzdG9tIGZpZWxkIGNvbnRhaW5pbmcgdmlkZW8gSURzL3VybHMgYXNz
b2NpYXRlZCB3aXRoIGFydGljbGU8L2xpPgoJCTxsaT48ZW0+dmlkZW88L2VtPiAmIzgyMTE7
IEEgPHNwYW4gY2xhc3M9ImNhcHMiPlVSTDwvc3Bhbj4gdG8gY2hlY2sgaWYgaXQgaXMgYSB2
YWxpZCBWaW1lbyA8c3BhbiBjbGFzcz0iY2FwcyI+VVJMPC9zcGFuPjwvbGk+Cgk8L3VsPgoK
CTxoMiBpZD0iaGVscC1zZWN0aW9uMDQiPkV4YW1wbGVzPC9oMj4KCgk8aDM+RXhhbXBsZSAx
OiBVc2UgY3VzdG9tIGZpZWxkIHRvIGFzc29jaWF0ZSB2aWRlbyB3aXRoIGFuIGFydGljbGU8
L2gzPgoKPHByZT48Y29kZT4mbHQ7dHhwOmFyY192aW1lbyBjdXN0b209JnF1b3Q7VmltZW8m
cXVvdDsgLyZndDsKPC9jb2RlPjwvcHJlPgoKCTxoMz5FeGFtcGxlIDI6IFNldCB0aGUgc2l6
ZSBvZiB0aGUgcGxheWVyPC9oMz4KCjxwcmU+PGNvZGU+Jmx0O3R4cDphcmNfdmltZW8gdmlk
ZW89JiMzOTtodHRwOi8vdmltZW8uY29tLzg2Mjk1NDUyJiMzOTsgd2lkdGg9JiMzOTs1MDAm
IzM5OyByYXRpbz0mIzM5OzE2OjkmIzM5OyAvJmd0Owo8L2NvZGU+PC9wcmU+CgoJPGgzPkV4
YW1wbGUgMzogVXNpbmcgdGhlIGNvbmRpdGlvbmFsIHRhZzwvaDM+Cgo8cHJlPjxjb2RlPiZs
dDt0eHA6YXJjX2lmX3ZpbWVvIHZpZGVvPSYjMzk7aHR0cDovL3ZpbWVvLmNvbS84NjI5NTQ1
MiYjMzk7Jmd0OwoJWWVzCiZsdDt0eHA6ZWxzZSAvJmd0OwoJTm8KJmx0Oy90eHA6YXJjX2lm
X3ZpbWVvJmd0Owo8L2NvZGU+PC9wcmU+CgoJPGgyIGlkPSJoZWxwLXNlY3Rpb24wNSI+QXV0
aG9yPC9oMj4KCgk8cD48YSBocmVmPSJodHRwOi8vYW5keS1jYXJ0ZXIuY29tIj5BbmR5IENh
cnRlcjwvYT4uIEZvciBvdGhlciBUZXh0cGF0dGVybiBwbHVnaW5zIGJ5IG1lIHZpc2l0IG15
IDxhIGhyZWY9Imh0dHA6Ly9hbmR5LWNhcnRlci5jb20vdHhwIj5QbHVnaW5zIHBhZ2U8L2E+
LjwvcD4KCgk8aDIgaWQ9ImhlbHAtc2VjdGlvbjA2Ij5MaWNlbnNlPC9oMj4KCgk8cD5UaGUg
PHNwYW4gY2xhc3M9ImNhcHMiPk1JVDwvc3Bhbj4gTGljZW5zZSAoPHNwYW4gY2xhc3M9ImNh
cHMiPk1JVDwvc3Bhbj4pPC9wPgoKCTxwPkNvcHlyaWdodCAmIzE2OTsgMjAxNCBBbmR5IENh
cnRlcjwvcD4KCgk8cD5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNo
YXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUg
YW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICYjODIyMDtTb2Z0d2Fy
ZSYjODIyMTspLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9u
LCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5
LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQv
b3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMg
dG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRv
IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczo8L3A+CgoJPHA+VGhlIGFib3ZlIGNvcHlyaWdo
dCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQg
aW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUu
PC9wPgoKCTxwPjxzcGFuIGNsYXNzPSJjYXBzIj5USEU8L3NwYW4+IDxzcGFuIGNsYXNzPSJj
YXBzIj5TT0ZUV0FSRTwvc3Bhbj4gSVMgPHNwYW4gY2xhc3M9ImNhcHMiPlBST1ZJREVEPC9z
cGFuPiAmIzgyMjA7QVMgSVMmIzgyMjE7LCA8c3BhbiBjbGFzcz0iY2FwcyI+V0lUSE9VVDwv
c3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPldBUlJBTlRZPC9zcGFuPiBPRiA8c3BhbiBjbGFz
cz0iY2FwcyI+QU5ZPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+S0lORDwvc3Bhbj4sIDxz
cGFuIGNsYXNzPSJjYXBzIj5FWFBSRVNTPC9zcGFuPiBPUiA8c3BhbiBjbGFzcz0iY2FwcyI+
SU1QTElFRDwvc3Bhbj4sIDxzcGFuIGNsYXNzPSJjYXBzIj5JTkNMVURJTkc8L3NwYW4+IDxz
cGFuIGNsYXNzPSJjYXBzIj5CVVQ8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5OT1Q8L3Nw
YW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5MSU1JVEVEPC9zcGFuPiBUTyA8c3BhbiBjbGFzcz0i
Y2FwcyI+VEhFPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+V0FSUkFOVElFUzwvc3Bhbj4g
T0YgPHNwYW4gY2xhc3M9ImNhcHMiPk1FUkNIQU5UQUJJTElUWTwvc3Bhbj4sIDxzcGFuIGNs
YXNzPSJjYXBzIj5GSVRORVNTPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+Rk9SPC9zcGFu
PiBBIDxzcGFuIGNsYXNzPSJjYXBzIj5QQVJUSUNVTEFSPC9zcGFuPiA8c3BhbiBjbGFzcz0i
Y2FwcyI+UFVSUE9TRTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPkFORDwvc3Bhbj4gPHNw
YW4gY2xhc3M9ImNhcHMiPk5PTklORlJJTkdFTUVOVDwvc3Bhbj4uIElOIE5PIDxzcGFuIGNs
YXNzPSJjYXBzIj5FVkVOVDwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPlNIQUxMPC9zcGFu
PiA8c3BhbiBjbGFzcz0iY2FwcyI+VEhFPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+QVVU
SE9SUzwvc3Bhbj4gT1IgPHNwYW4gY2xhc3M9ImNhcHMiPkNPUFlSSUdIVDwvc3Bhbj4gPHNw
YW4gY2xhc3M9ImNhcHMiPkhPTERFUlM8L3NwYW4+IEJFIDxzcGFuIGNsYXNzPSJjYXBzIj5M
SUFCTEU8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5GT1I8L3NwYW4+IDxzcGFuIGNsYXNz
PSJjYXBzIj5BTlk8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5DTEFJTTwvc3Bhbj4sIDxz
cGFuIGNsYXNzPSJjYXBzIj5EQU1BR0VTPC9zcGFuPiBPUiA8c3BhbiBjbGFzcz0iY2FwcyI+
T1RIRVI8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5MSUFCSUxJVFk8L3NwYW4+LCA8c3Bh
biBjbGFzcz0iY2FwcyI+V0hFVEhFUjwvc3Bhbj4gSU4gQU4gPHNwYW4gY2xhc3M9ImNhcHMi
PkFDVElPTjwvc3Bhbj4gT0YgPHNwYW4gY2xhc3M9ImNhcHMiPkNPTlRSQUNUPC9zcGFuPiwg
PHNwYW4gY2xhc3M9ImNhcHMiPlRPUlQ8L3NwYW4+IE9SIDxzcGFuIGNsYXNzPSJjYXBzIj5P
VEhFUldJU0U8L3NwYW4+LCA8c3BhbiBjbGFzcz0iY2FwcyI+QVJJU0lORzwvc3Bhbj4gPHNw
YW4gY2xhc3M9ImNhcHMiPkZST008L3NwYW4+LCA8c3BhbiBjbGFzcz0iY2FwcyI+T1VUPC9z
cGFuPiBPRiBPUiBJTiA8c3BhbiBjbGFzcz0iY2FwcyI+Q09OTkVDVElPTjwvc3Bhbj4gPHNw
YW4gY2xhc3M9ImNhcHMiPldJVEg8L3NwYW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5USEU8L3Nw
YW4+IDxzcGFuIGNsYXNzPSJjYXBzIj5TT0ZUV0FSRTwvc3Bhbj4gT1IgPHNwYW4gY2xhc3M9
ImNhcHMiPlRIRTwvc3Bhbj4gPHNwYW4gY2xhc3M9ImNhcHMiPlVTRTwvc3Bhbj4gT1IgPHNw
YW4gY2xhc3M9ImNhcHMiPk9USEVSPC9zcGFuPiA8c3BhbiBjbGFzcz0iY2FwcyI+REVBTElO
R1M8L3NwYW4+IElOIDxzcGFuIGNsYXNzPSJjYXBzIj5USEU8L3NwYW4+IDxzcGFuIGNsYXNz
PSJjYXBzIj5TT0ZUV0FSRTwvc3Bhbj4uPC9wPgoKIjtzOjQ6ImNvZGUiO3M6MzI3NDoiCmZ1
bmN0aW9uIGFyY192aW1lbygkYXR0cywgJHRoaW5nKQp7CglnbG9iYWwgJHRoaXNhcnRpY2xl
OwoKCSRkZWZhdWx0cyA9IGFycmF5KAoJCSd2aWRlbycgICAgID0+ICcnLAoJCSdjdXN0b20n
ICAgID0+ICdWaW1lbyBJRCcsCgkJJ3dpZHRoJyAgICAgPT4gJzAnLAoJCSdoZWlnaHQnICAg
ID0+ICcwJywKCQkncmF0aW8nCQk9PiAnNDozJywKCQknY29sb3InCQk9PiBudWxsLAoJCSdw
b3J0cmFpdCcJPT4gbnVsbCwKCQkndGl0bGUnCQk9PiBudWxsLAoJCSdieWxpbmUnCT0+IG51
bGwsCgkJJ2JhZGdlJwkJPT4gbnVsbCwKCQknbG9vcCcJCT0+IG51bGwsCgkJJ2F1dG9wYXVz
ZScJPT4gbnVsbCwKCQknYXV0b3BsYXknCT0+IG51bGwsCgkJJ2xhYmVsJyAgICAgPT4gJycs
CgkJJ2xhYmVsdGFnJyAgPT4gJycsCgkJJ3dyYXB0YWcnICAgPT4gJycsCgkJJ2NsYXNzJyAg
ICAgPT4gX19GVU5DVElPTl9fCgkpOwoKCWV4dHJhY3QobEF0dHMoJGRlZmF1bHRzLCAkYXR0
cykpOwoKICAgICRjdXN0b20gPSBzdHJ0b2xvd2VyKCRjdXN0b20pOwogICAgaWYgKCR2aWRl
byAmJiBpc3NldCgkdGhpc2FydGljbGVbJGN1c3RvbV0pKSB7CiAgICAgICAgJHZpZGVvID0g
JHRoaXNhcnRpY2xlWyRjdXN0b21dOwogICAgfQoKICAgICRtYXRjaCA9IF9hcmNfdmltZW8o
JHZpZGVvKTsKICAgIGlmICgkbWF0Y2gpIHsKICAgIAkkdmlkZW8gPSAkbWF0Y2g7CiAgICB9
IGVsc2VpZiAoZW1wdHkoJHZpZGVvKSkgewogICAgCXJldHVybiAnJzsKICAgIH0KCiAgICAv
LyBJZiB0aGUgd2lkdGggYW5kL29yIGhlaWdodCBoYXMgbm90IGJlZW4gc2V0IHdlIHdhbnQg
dG8gY2FsY3VsYXRlIG5ldwogICAgLy8gb25lcyB1c2luZyB0aGUgYXNwZWN0IHJhdGlvLgog
ICAgaWYgKCEkd2lkdGggfHwgISRoZWlnaHQpIHsKCiAgICAJLy8gV29yayBvdXQgdGhlIGFz
cGVjdCByYXRpby4KICAgIAlwcmVnX21hdGNoKCIvKFxkKyk6KFxkKykvIiwgJHJhdGlvLCAk
bWF0Y2hlcyk7CiAgICAJaWYgKCRtYXRjaGVzWzBdICYmICRtYXRjaGVzWzFdIT0wICYmICRt
YXRjaGVzWzJdIT0wKSB7CgkJCSRhc3BlY3QgPSAkbWF0Y2hlc1sxXS8kbWF0Y2hlc1syXTsK
CQl9IGVsc2UgewoJCQkkYXNwZWN0ID0gMS4zMzM7CgkJfQoKCQkvLyBDYWxjdWF0ZSB0aGUg
bmV3IHdpZHRoL2hlaWdodC4KCQlpZiAoJHdpZHRoKSB7CgkJCSRoZWlnaHQgPSAkd2lkdGgv
JGFzcGVjdDsKCQl9IGVsc2VpZiAoJGhlaWdodCkgewoJCQkkd2lkdGggPSAkaGVpZ2h0KiRh
c3BlY3Q7CgkJfSBlbHNlIHsKCQkJJHdpZHRoID0gNDI1OwoJCQkkaGVpZ2h0ID0gMzQ0OwoJ
CX0KCiAgICB9CgoJJHNyYyA9ICcvL3BsYXllci52aW1lby5jb20vdmlkZW8vJyAuICR2aWRl
bzsKCgkkcVN0cmluZyA9IGFycmF5KCk7CgoJLy8gQ2hlY2sgaWYgdGhlIHBsYXllcidzIFVJ
IGNvbG91ciBpcyBiZWluZyBjdXN0b21pc2VkLgoJaWYgKCRjb2xvciAmJiBwcmVnX21hdGNo
KCd8XiM/KFthLXowLTldezZ9KSR8aScsICRjb2xvciwgJG1hdGNoKSkgewoJCSRxU3RyaW5n
W10gPSAnY29sb3I9JyAuICRtYXRjaFsxXTsKCX0KCgkvLyBDaGVjayB3aGV0aGVyIHRvIHNo
b3cgb3IgaGlkZSB0aGUgdXNlcidzIHBvcnRyYWl0IGZyb20gdGhlIHZpZGVvLgoJaWYgKCRw
b3J0cmFpdCE9PW51bGwpIHsKCQkkcVN0cmluZ1tdID0gJ3BvcnRyYWl0PScgLiAoJHBvcnRy
YWl0ID8gJzEnIDogJzAnKTsKCX0KCgkvLyBDaGVjayB3aGV0aGVyIHRvIHNob3cgb3IgaGlk
ZSB0aGUgdmlkZW8gdGl0bGUuCglpZiAoJHRpdGxlIT09bnVsbCkgewoJCSRxU3RyaW5nW10g
PSAndGl0bGU9JyAuICgkdGl0bGUgPyAnMScgOiAnMCcpOwoJfQoKCS8vIENoZWNrIHdoZXRo
ZXIgdG8gc2hvdyBvciBoaWRlIHRoZSB1c2VyJ3MgYnlsaW5lLgoJaWYgKCRieWxpbmUhPT1u
dWxsKSB7CgkJJHFTdHJpbmdbXSA9ICdieWxpbmU9JyAuICgkYnlsaW5lID8gJzEnIDogJzAn
KTsKCX0KCgkvLyBDaGVjayB3aGV0aGVyIHRvIHNob3cgb3IgaGlkZSB0aGUgYmFkZ2UuCglp
ZiAoJGJhZGdlIT09bnVsbCkgewoJCSRxU3RyaW5nW10gPSAnYmFkZ2U9JyAuICgkYmFkZ2Ug
PyAnMScgOiAnMCcpOwoJfQoKCS8vIENoZWNrIHdoZXRoZXIgdG8gcGxheSB0aGUgdmlkZW8g
b24gbG9vcC4KCWlmICgkbG9vcCE9PW51bGwpIHsKCQkkcVN0cmluZ1tdID0gJ2xvb3A9JyAu
ICgkbG9vcCA/ICcxJyA6ICcwJyk7Cgl9CgoJLy8gQ2hlY2sgd2hldGhlciB0byBlbmFibGUv
ZGlzYWJsZSBhdXRvcGF1c2UuCglpZiAoJGF1dG9wYXVzZSE9PW51bGwpIHsKCQkkcVN0cmlu
Z1tdID0gJ2F1dG9wYXVzZT0nIC4gKCRhdXRvcGF1c2UgPyAnMScgOiAnMCcpOwoJfQoKCS8v
IENoZWNrIHdoZXRoZXIgdG8gZW5hYmxlL2Rpc2FibGUgYXV0b3BsYXkuCglpZiAoJGF1dG9w
bGF5IT09bnVsbCkgewoJCSRxU3RyaW5nW10gPSAnYXV0b3BsYXk9JyAuICgkYXV0b3BsYXkg
PyAnMScgOiAnMCcpOwoJfQoKCS8vIENoZWNrIGlmIHdlIG5lZWQgdG8gYXBwZW5kIGEgcXVl
cnkgc3RyaW5nIHRvIHRoZSB2aWRlbyBzcmMuCglpZiAoIWVtcHR5KCRxU3RyaW5nKSkgewoJ
CSRzcmMgLj0gJz8nIC4gaW1wbG9kZSgnJmFtcDsnLCAkcVN0cmluZyk7Cgl9CgoJJG91dCA9
ICI8aWZyYW1lIHNyYz0nJHNyYycgd2lkdGg9JyR3aWR0aCcgaGVpZ2h0PSckaGVpZ2h0JyBm
cmFtZWJvcmRlcj0nMCcgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVl
biBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+IjsKCglyZXR1cm4gZG9MYWJlbCgkbGFiZWws
ICRsYWJlbHRhZykgLiAoKCR3cmFwdGFnKSA/IGRvVGFnKCRvdXQsICR3cmFwdGFnLCAkY2xh
c3MpIDogJG91dCk7Cgp9CgpmdW5jdGlvbiBhcmNfaWZfdmltZW8oJGF0dHMsICR0aGluZykK
ewoJZ2xvYmFsICR0aGlzYXJ0aWNsZTsKCglleHRyYWN0KGxBdHRzKGFycmF5KAoJCSdjdXN0
b20nID0+IG51bGwsCgkJJ3ZpZGVvJyA9PiBudWxsCgkpLCAkYXR0cykpOwoKCSRyZXN1bHQg
PSAkdmlkZW8gPyBfYXJjX3ZpbWVvKCR2aWRlbykgOiBfYXJjX3ZpbWVvKCR0aGlzYXJ0aWNs
ZVtzdHJ0b2xvd2VyKCRjdXN0b20pXSk7CgoJcmV0dXJuIHBhcnNlKEV2YWxFbHNlKCR0aGlu
ZywgJHJlc3VsdCkpOwp9CgpmdW5jdGlvbiBfYXJjX3ZpbWVvKCR2aWRlbykKewoJaWYgKHBy
ZWdfbWF0Y2goJyNeaHR0cDovLygocGxheWVyfHd3dylcLik/dmltZW9cLmNvbSgvdmlkZW8p
Py8oXGQrKSNpJywgJHZpZGVvLCAkbWF0Y2hlcykpIHsKICAgIAlyZXR1cm4gJG1hdGNoZXNb
NF07CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwp9CiI7czozOiJtZDUiO3M6MzI6ImVmZDgw
ZTgzNDYzOTJiNzFkY2NhMWNmZjNlYWQ0YzRlIjt9
